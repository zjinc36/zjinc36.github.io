<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><title>Java中栈的「前缀」「中缀」「后缀」表达式 | 想了20分钟的博客名</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java中栈的「前缀」「中缀」「后缀」表达式</h1><a id="logo" href="/.">想了20分钟的博客名</a><p class="description">世界是唯物辩证的</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Java中栈的「前缀」「中缀」「后缀」表达式</h1><div class="post-meta"><a href="/2020/04/03/Java中栈的「前缀」「中缀」「后缀」表达式/#comments" class="comment-count"></a><p><span class="date">Apr 03, 2020</span><span><a href="/categories/数据结构与算法/" class="category">数据结构与算法</a></span></p></div><div class="post-content"><h1 id="前缀表达式-波兰表达式"><a href="#前缀表达式-波兰表达式" class="headerlink" title="前缀表达式(波兰表达式)"></a>前缀表达式(波兰表达式)</h1><h2 id="什么是前缀表达式"><a href="#什么是前缀表达式" class="headerlink" title="什么是前缀表达式"></a>什么是前缀表达式</h2><ol>
<li>前缀表达式又称之为波兰式,前缀表达式的运算符位于操作数之前</li>
<li>举例说明:<code>(3+4)*5-6</code>对应的前缀表达式就是<code>- * + 3 4 5 6</code></li>
</ol>
<h2 id="前缀表达式的计算机求值"><a href="#前缀表达式的计算机求值" class="headerlink" title="前缀表达式的计算机求值"></a>前缀表达式的计算机求值</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol>
<li>从右至左扫描表达式</li>
<li>遇到数字时,将数字压入堆栈</li>
<li>遇到运算符时,弹出栈顶的两个数,用运算符对它们做相应的计算(栈顶元素和次栈顶元素),并将结果入栈</li>
<li>重复上述过程,直到表达式最左端</li>
<li>最后运算得出的值即为表达式的结果</li>
</ol>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>举例说明:<code>(3+4)*5-6</code>对应的前缀表达式就是<code>- * + 3 4 5 6</code>,针对前缀表达式求值步骤如下:</p>
<ol>
<li>从右至左扫描</li>
<li>遇到数字<code>6,5,4,3</code>,将数字压入栈</li>
<li>遇到<code>+</code>运算符,因此弹出3和4(3为栈顶元素,4为次栈顶元素),计算出3+4的值,得7,再将7入栈</li>
<li>接下来,是<code>*</code>运算符,因此弹出7和5,计算出<code>7*5=35</code>,将35入栈</li>
<li>最后是<code>-</code>运算符,计算出<code>35-6</code>的值,即29,由此得出最终结果</li>
</ol>
<h1 id="中缀表达式"><a href="#中缀表达式" class="headerlink" title="中缀表达式"></a>中缀表达式</h1><h2 id="什么是中缀表达式"><a href="#什么是中缀表达式" class="headerlink" title="什么是中缀表达式"></a>什么是中缀表达式</h2><ol>
<li>中缀表达式就是常见的运算表达式,如<code>(3+4)*5-6</code></li>
<li>中缀表达式的求值是我们人最熟悉的,但是对计算机来说却不好操作(如下案例),因此,在计算结果时,往往会将中缀表达式转成其他表达式来操作(一般转成后缀表达式)</li>
</ol>
<h2 id="使用栈-中缀表达式-来实现综合计算器"><a href="#使用栈-中缀表达式-来实现综合计算器" class="headerlink" title="使用栈(中缀表达式)来实现综合计算器"></a>使用栈(中缀表达式)来实现综合计算器</h2><p>计算:<code>7*2*2-5+1-5+3-3</code></p>
<h3 id="思路分析"><a href="#思路分析" class="headerlink" title="思路分析"></a>思路分析</h3><p><img src="/images/2020/04/20200402003.png" alt></p>
<ul>
<li>通过一个index来遍历我们的表达式</li>
<li>如果我们发现是一个数字,就直接入数栈</li>
<li>如果发现扫描到一个符号,就分如下情况<ul>
<li>如果当前符号栈为空,就直接入栈</li>
<li>如果当前符号栈有符号,就进行比较<ul>
<li>如果当前的操作符号优先级小于或者等于栈中的操作符,就需要从数栈中pop出两个数,从符号栈中pop出一个符号,进行运算,将得到的结果入数栈.然后将当前的操作符入符号栈</li>
<li>如果当前的操作符的优先级大于栈中的操作符,就直接入符号栈</li>
</ul>
</li>
</ul>
</li>
<li>当表达式扫描完毕,就顺序的从数栈和符号栈中pop出相应的数和符号,并运行</li>
<li>最后在数栈中只有一个数字,就是表达式的结果</li>
</ul>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="用数组模拟栈"><a href="#用数组模拟栈" class="headerlink" title="用数组模拟栈"></a>用数组模拟栈</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxSize;	<span class="comment">// 栈的大小</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span>[] stack;	<span class="comment">// 模拟栈用数组</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> top = -<span class="number">1</span>;	<span class="comment">// top表示栈顶,初始化为-1</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">		stack = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="keyword">this</span>.maxSize];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 栈满</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> top == maxSize - <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 栈空</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> top == -<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 入栈</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 先判断栈是否已满</span></span><br><span class="line">		<span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">			System.out.println(<span class="string">"栈满"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		top++;</span><br><span class="line">		stack[top] = value;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 出栈</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 先判断栈是否为空</span></span><br><span class="line">		<span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"栈空"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 获取此时栈顶的值</span></span><br><span class="line">		<span class="keyword">int</span> value = stack[top];</span><br><span class="line">		<span class="comment">// 将栈顶的值置为默认</span></span><br><span class="line">		stack[top] = <span class="number">0</span>;</span><br><span class="line">		top--;</span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 显示栈</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">			System.out.println(<span class="string">"栈空"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 需要从栈顶开始遍历</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = top; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			System.out.printf(<span class="string">"stack[%d]=%d\n"</span>, i, stack[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查看当前栈顶的值</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> stack[top];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="计算器类"><a href="#计算器类" class="headerlink" title="计算器类"></a>计算器类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">	<span class="comment">// String expression = "5-3+3";</span></span><br><span class="line">	<span class="keyword">private</span> String expression = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Calculator</span><span class="params">(String expression)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.expression = expression;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 进行计算</span></span><br><span class="line"><span class="comment">	 * 思路</span></span><br><span class="line"><span class="comment">	 * 1.通过一个index来遍历我们的表达式</span></span><br><span class="line"><span class="comment">	 * 2.如果我们发现是一个数字,就直接入数栈</span></span><br><span class="line"><span class="comment">	 * 3.如果发现扫描到一个符号,就分如下情况</span></span><br><span class="line"><span class="comment">	 * -&gt; 3.1 如果当前符号栈为空,就直接入栈</span></span><br><span class="line"><span class="comment">	 * -&gt; 3.2 如果当前符号栈有符号,就进行比较</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 3.3 如果当前的操作符号优先级小于或者等于栈中的操作符,就需要从数栈中pop出两个数,</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 	 从符号栈中pop出一个符号,进行运算,将得到的结果入数栈.然后将当前的操作符入符号栈</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 3.4 如果当前的操作符的优先级大于栈中的操作符,就直接入符号栈</span></span><br><span class="line"><span class="comment">	 * 4.当表达式扫描完毕,就顺序的从数栈和符号栈中pop出相应的数和符号,并运行</span></span><br><span class="line"><span class="comment">	 * 5.最后在数栈中只有一个数字,就是表达式的结果</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 创建两个栈,数栈和符号栈</span></span><br><span class="line">		ArrayStack numStack = <span class="keyword">new</span> ArrayStack(<span class="number">10</span>);</span><br><span class="line">		ArrayStack operStack = <span class="keyword">new</span> ArrayStack(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 定义需要的相关变量</span></span><br><span class="line">		<span class="keyword">int</span> index = <span class="number">0</span>;	<span class="comment">// 用于扫描</span></span><br><span class="line">		<span class="keyword">int</span> num1 = <span class="number">0</span>; 	<span class="comment">// 先出栈的数</span></span><br><span class="line">		<span class="keyword">int</span> num2 = <span class="number">0</span>;	<span class="comment">// 后出栈的数</span></span><br><span class="line">		<span class="keyword">int</span> oper = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">char</span> ch = <span class="string">' '</span>;	<span class="comment">//将每次扫描的到的char保存到ch</span></span><br><span class="line"></span><br><span class="line">		String keepNum = <span class="string">""</span>;	<span class="comment">//用于拼接多位数</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 扫描数字和符号进行入栈</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="comment">// 1.通过一个index来遍历我们的表达式</span></span><br><span class="line">			ch = expression.substring(index, index+<span class="number">1</span>).charAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 判断是数字还是字符</span></span><br><span class="line">			<span class="comment">// 2.如果我们发现是一个数字,就直接入数栈</span></span><br><span class="line">			<span class="comment">// 3.如果发现扫描到一个符号,就分如下情况</span></span><br><span class="line">			<span class="keyword">if</span> (isOper(ch)) &#123;</span><br><span class="line">				<span class="comment">// 3.1 如果当前符号栈为空,就直接入栈</span></span><br><span class="line">				<span class="comment">// 3.2 如果当前符号栈有符号,就进行比较</span></span><br><span class="line">				<span class="keyword">if</span> (operStack.isEmpty()) &#123;</span><br><span class="line">					operStack.push(ch);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="comment">// 3.3 如果当前的操作符号优先级小于或者等于栈中的操作符,</span></span><br><span class="line">					<span class="comment">//	   就需要从数栈中pop出两个数,从符号栈中pop出一个符号,进行运算,</span></span><br><span class="line">					<span class="comment">//	   将得到的结果入数栈.然后将当前的操作符入符号栈</span></span><br><span class="line">					<span class="comment">// 3.4 如果当前的操作符的优先级大于栈中的操作符,就直接入符号栈</span></span><br><span class="line">					<span class="keyword">if</span> (priority(ch) &lt;= priority(operStack.peek())) &#123;</span><br><span class="line">						num1 = numStack.pop();</span><br><span class="line">						num2 = numStack.pop();</span><br><span class="line">						oper = operStack.pop();</span><br><span class="line"></span><br><span class="line">						res = cal(num1, num2, oper);</span><br><span class="line"></span><br><span class="line">						<span class="comment">// 把运算结果入数栈</span></span><br><span class="line">						numStack.push(res);</span><br><span class="line">						<span class="comment">// 然后将当前的操作符号入符号栈</span></span><br><span class="line">						operStack.push(ch);</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						operStack.push(ch);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="comment">// 如果是数,则直接入栈</span></span><br><span class="line">				<span class="comment">// -&gt; 这里需要处理数字是不是多位数</span></span><br><span class="line">				<span class="comment">// 思路:</span></span><br><span class="line">				<span class="comment">// -&gt; 1.当处理多位数时,不能当前字符是数就立即入栈,因为它后一位也可能是数字</span></span><br><span class="line">				<span class="comment">// -&gt; 2.在处理数时,需要向expression的表达式的index后再看一位,如果是数就进行扫描,如果是符号才入栈</span></span><br><span class="line">				<span class="comment">// -&gt; 3.因此,我们需要定义一个变量字符串,用于拼接</span></span><br><span class="line"></span><br><span class="line">				<span class="comment">// 处理多位数</span></span><br><span class="line">				keepNum += ch;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 如果ch已经是expression的最后一位,就直接入栈</span></span><br><span class="line">				<span class="keyword">if</span> (index == expression.length() - <span class="number">1</span>) &#123;</span><br><span class="line">					numStack.push(Integer.parseInt(keepNum));</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="comment">// 判断下一个字符是不是数字,如果是数字,就继续扫描,如果是运算符,则入栈</span></span><br><span class="line">					<span class="keyword">if</span> (isOper(expression.substring(index+<span class="number">1</span>, index+<span class="number">2</span>).charAt(<span class="number">0</span>))) &#123;</span><br><span class="line">						numStack.push(Integer.parseInt(keepNum));</span><br><span class="line">						<span class="comment">// keepNum要记得清空</span></span><br><span class="line">						keepNum = <span class="string">""</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="comment">// 让index + 1, 并判断是否扫描到expression最后</span></span><br><span class="line">			index++;</span><br><span class="line">			<span class="keyword">if</span> (index &gt;= expression.length()) &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 4.当表达式扫描完毕,就顺序的从数栈和符号栈中pop出相应的数和符号,并运行</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="comment">// 如果符号栈为空,则计算到最后的结果,数栈中只有一个数字</span></span><br><span class="line">			<span class="keyword">if</span> (operStack.isEmpty()) &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			num1 = numStack.pop();</span><br><span class="line">			num2 = numStack.pop();</span><br><span class="line">			oper = operStack.pop();</span><br><span class="line">			res = cal(num1, num2, oper);</span><br><span class="line">			numStack.push(res);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 5.最后在数栈中只有一个数字,就是表达式的结果</span></span><br><span class="line">		<span class="keyword">int</span> calRes = numStack.pop();</span><br><span class="line">		System.out.printf(<span class="string">"表达式%s = %d"</span>, expression, calRes);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 判断是不是一个运算符</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> val</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isOper</span><span class="params">(<span class="keyword">char</span> val)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> val == <span class="string">'+'</span> || val == <span class="string">'-'</span> || val == <span class="string">'*'</span> || val == <span class="string">'/'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 计算</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> num1</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> num2</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> oper</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> num1, <span class="keyword">int</span> num2, <span class="keyword">int</span> oper)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> res = <span class="number">0</span>; <span class="comment">// 用于存放计算结果</span></span><br><span class="line">		<span class="keyword">switch</span> (oper) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">			res = num1 + num2;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">			res = num2 - num1; <span class="comment">// 注意参数的顺序</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">'*'</span>:</span><br><span class="line">			res = num2 * num1;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">			res = num2 / num1;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> res;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回运算符的优先级</span></span><br><span class="line"><span class="comment">	 * -&gt; 暂时只考虑四则运算(+,-,*,/)</span></span><br><span class="line"><span class="comment">	 * -&gt; 这里使用数字表示优先级</span></span><br><span class="line"><span class="comment">	 * -&gt; 数字越大,则优先级越高</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> oper</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">priority</span><span class="params">(<span class="keyword">int</span> oper)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (oper == <span class="string">'*'</span> || oper == <span class="string">'/'</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">'+'</span> || oper == <span class="string">'-'</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStackTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 计算表达式的值</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCalculator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String expression = <span class="string">"5-3*3"</span>;</span><br><span class="line">		Calculator calculator = <span class="keyword">new</span> Calculator(expression);</span><br><span class="line">		calculator.calResult();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="后缀表达式"><a href="#后缀表达式" class="headerlink" title="后缀表达式"></a>后缀表达式</h1><h2 id="什么是后缀表达式"><a href="#什么是后缀表达式" class="headerlink" title="什么是后缀表达式"></a>什么是后缀表达式</h2><ol>
<li>后缀表达式又称之为逆波兰表达式,与前缀表达式相似,只是运算符位于操作数之后</li>
<li>后缀表达式举例说明:<code>(3+4)*5-6</code>对应的后缀表达式就是<code>3 4 + 5 * 6 -</code></li>
</ol>
<p>再比如</p>
<table>
<thead>
<tr>
<th>正常的表达式</th>
<th>逆波兰表达式</th>
</tr>
</thead>
<tbody><tr>
<td>a + b</td>
<td>a b +</td>
</tr>
<tr>
<td>a + (b - c)</td>
<td>a b c - +</td>
</tr>
<tr>
<td>a + (b - c) * d</td>
<td>a b c - d * +</td>
</tr>
<tr>
<td>a + d * (b - c)</td>
<td>a d b c - * +</td>
</tr>
<tr>
<td>a = 1 + 3</td>
<td>a 1 3 + =</td>
</tr>
</tbody></table>
<h2 id="后缀表达式的计算机求值"><a href="#后缀表达式的计算机求值" class="headerlink" title="后缀表达式的计算机求值"></a>后缀表达式的计算机求值</h2><h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><ol>
<li>从左至右扫描表达式</li>
<li>遇到数字时,将数字压入栈顶</li>
<li>遇到运算符时,弹出栈顶的两个数,用运算符对它们做相应的运算(次栈顶元素和栈顶元素),并将结果入栈</li>
<li>重复上述过程直到表达式最右端</li>
<li>最后运算得出的值即为表达式的结果</li>
</ol>
<h3 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h3><p>例如:<code>(3+4)*5-6</code>对应的后缀表达式就是<code>3 4 + 5 * 6 -</code>,针对后缀表达式求值步骤如下:</p>
<ol>
<li>从左至右扫描,将3和4压入堆栈</li>
<li>遇到<code>+</code>运算符,因此弹出4和3(4为栈顶元素,3为次栈顶元素),计算出3+4的值,得7,再将7入栈</li>
<li>将5入栈</li>
<li>接下来是<code>*</code>运算符,因此弹出5和7,计算出<code>7*5=35</code>,将35入栈</li>
<li>将6入栈</li>
<li>最后是<code>-</code>运算符,计算出35-6的值,即29,由此得出最终结果</li>
</ol>
<h2 id="实现逆波兰计算器"><a href="#实现逆波兰计算器" class="headerlink" title="实现逆波兰计算器"></a>实现逆波兰计算器</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>实现一个逆波兰计算器,要求完成如下任务</p>
<ul>
<li>输入一个逆波兰表达式(后缀表达式),使用Java的栈(Stack),计算结果.<ul>
<li>这里<strong>暂时输入的是逆波兰表达式</strong></li>
<li>后面会说明如何用中缀表达式转后缀表达式</li>
</ul>
</li>
<li>支持小括号和多位整数<ul>
<li>这里主要为了说明数据结构,因此计算器进行简化,只支持整数的计算</li>
</ul>
</li>
</ul>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><ol>
<li><p>实现逆波兰表达式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolandNotation</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String suffixExpression;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PolandNotation</span><span class="params">(String suffixExpression)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.suffixExpression = suffixExpression;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 先定义一个逆波兰表达式</span></span><br><span class="line">		<span class="comment">// (3+4)*5-6 =&gt; 3 4 + 5 * 6 -</span></span><br><span class="line">		<span class="comment">// 为了说明方便,逆波兰表达式的数字和符号使用空格隔开</span></span><br><span class="line"><span class="comment">//		String suffixExpression = "3 4 + 5 * 6 - ";</span></span><br><span class="line">		List&lt;String&gt; suffixList = getListString(suffixExpression);</span><br><span class="line">		<span class="keyword">int</span> res = calculate(suffixList);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">"计算的结果是 = "</span> + res);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将一个逆波兰表达式字符串进行分割后,依次将数据和运算符放入 ArrayList 中</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffixExpression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getListString</span><span class="params">(String suffixExpression)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 将 suffixExpression 分割</span></span><br><span class="line">		String[] split = suffixExpression.split(<span class="string">" "</span>);</span><br><span class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		<span class="keyword">for</span> (String element : split) &#123;</span><br><span class="line">			list.add(element);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 完成对逆波兰表达式的运算</span></span><br><span class="line"><span class="comment">	 * 思路</span></span><br><span class="line"><span class="comment">	 * 例如:(3+4)*5-6对应的后缀表达式就是3 4 + 5 * 6 -,针对后缀表达式求值步骤如下:</span></span><br><span class="line"><span class="comment">	 * 1. 从左至右扫描,将3和4压入堆栈</span></span><br><span class="line"><span class="comment">	 * 2. 遇到+运算符,因此弹出4和3(4为栈顶元素,3为次栈顶元素),计算出3+4的值,得7,再将7入栈</span></span><br><span class="line"><span class="comment">	 * 3. 将5入栈</span></span><br><span class="line"><span class="comment">	 * 4. 接下来是*运算符,因此弹出5和7,计算出7*5=35,将35入栈</span></span><br><span class="line"><span class="comment">	 * 5. 将6入栈</span></span><br><span class="line"><span class="comment">	 * 6. 最后是-运算符,计算出35-6的值,即29,由此得出最终结果</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffixlist</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(List&lt;String&gt; suffixList)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 创建一个栈(这里只需要一个栈)</span></span><br><span class="line">		Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 遍历 suffixList</span></span><br><span class="line">		<span class="comment">// 即 -&gt; 1.从左至右扫描</span></span><br><span class="line">		<span class="keyword">for</span> (String item : suffixList) &#123;</span><br><span class="line">			<span class="comment">// 这里使用正则表达式来取出数</span></span><br><span class="line">			<span class="comment">// 即 -&gt; 1. 将 3 4 压入栈</span></span><br><span class="line">			<span class="keyword">if</span> (item.matches(<span class="string">"\\d+"</span>)) &#123;	<span class="comment">// 匹配的是多位数</span></span><br><span class="line">				<span class="comment">// 入栈</span></span><br><span class="line">				stack.push(item);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;	<span class="comment">// 2.遇到+运算符...</span></span><br><span class="line">				<span class="keyword">int</span> stackTopElement = Integer.parseInt(stack.pop());	<span class="comment">// 栈顶元素</span></span><br><span class="line">				<span class="keyword">int</span> stackNextTopElement = Integer.parseInt(stack.pop());	<span class="comment">// 次栈顶元素</span></span><br><span class="line"></span><br><span class="line">				<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (item.equals(<span class="string">"+"</span>)) &#123;</span><br><span class="line">					res = stackTopElement + stackNextTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"-"</span>)) &#123;</span><br><span class="line">					res = stackNextTopElement - stackTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"*"</span>)) &#123;</span><br><span class="line">					res = stackTopElement * stackNextTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"/"</span>)) &#123;</span><br><span class="line">					res = stackNextTopElement / stackTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// 2.计算出3+4的值,得7,在将7入栈</span></span><br><span class="line">				stack.push(<span class="string">""</span> + res);	<span class="comment">// 这里需要将数字转换成字符串</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 最后留在stack中的数据是运算结果</span></span><br><span class="line">		<span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolandNotationTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCalResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String suffixExpression = <span class="string">"3 4 + 5 * 6 - "</span>;</span><br><span class="line">		PolandNotation polandNotation = <span class="keyword">new</span> PolandNotation(suffixExpression);</span><br><span class="line">		polandNotation.calResult();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="中缀表达式转后缀表达式"><a href="#中缀表达式转后缀表达式" class="headerlink" title="中缀表达式转后缀表达式"></a>中缀表达式转后缀表达式</h1><p>从上述代码中可以看出,后缀表达式适合计算式进行计算,但是人却不太容易写出来,尤其是在表达式很长的情况下,因此,在开发中,我们需要将中缀表达式转成后缀表达式</p>
<h2 id="中缀表达式转后缀表达式的思路"><a href="#中缀表达式转后缀表达式的思路" class="headerlink" title="中缀表达式转后缀表达式的思路"></a>中缀表达式转后缀表达式的思路</h2><ol>
<li>初始化两个栈:运算符栈s1和储存中间结果的栈s2</li>
<li>从左至右扫描中缀表达式</li>
<li>遇到操作数(数字)时,将其压入s2</li>
<li>遇到运算符时,比较其与s1栈顶运算符的优先级<ol>
<li>如果s1为空,或栈顶运算符为左括号”(“,则直接将此运算符入栈</li>
<li>否则,若优先级比栈顶运算符的高,将运算符压入s1</li>
<li>否则,将s1栈顶的运算符弹出并压入到s2中,再次转到步骤4与s1中新的栈顶运算符相比较</li>
</ol>
</li>
<li>遇到括号时<ol>
<li>如果是左括号”(“,则直接压入s1</li>
<li>如果是右括号”)”,则依次弹出s1栈顶的运算符,并压入s2,直到遇到左括号为止,此时将这一对括号丢弃</li>
</ol>
</li>
<li>重复步骤2至5,知道表达式的最右边</li>
<li>将s1中剩余的运算符依次弹出并压入s2</li>
<li>依次弹出s2中的元素并输出,结果的逆序即为中缀表达式对应的后缀表达式</li>
</ol>
<h2 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h2><p>将中缀表达式<code>1+((2+3)*4)-5</code>转换为后缀表达式,结果为<code>1 2 3 + 4 * + 5 -</code>,过程如下:</p>
<table>
<thead>
<tr>
<th>扫描到的元素</th>
<th>s2(栈底-&gt;栈顶)</th>
<th>s1(栈底-&gt;栈顶)</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>空</td>
<td>数字,直接入s2栈</td>
</tr>
<tr>
<td>+</td>
<td>1</td>
<td>+</td>
<td>s1为空,运算符直接入s1栈</td>
</tr>
<tr>
<td>(</td>
<td>1</td>
<td>+ (</td>
<td>左括号,直接入s1栈</td>
</tr>
<tr>
<td>(</td>
<td>1</td>
<td>+ ( (</td>
<td>左括号,直接入s1栈</td>
</tr>
<tr>
<td>2</td>
<td>1 2</td>
<td>+ ( (</td>
<td>数字,直接入s2栈</td>
</tr>
<tr>
<td>+</td>
<td>1 2</td>
<td>+ ( ( +</td>
<td>s1栈顶为左括号,运算符直接入栈</td>
</tr>
<tr>
<td>3</td>
<td>1 2 3</td>
<td>+ ( ( +</td>
<td>数字</td>
</tr>
<tr>
<td>)</td>
<td>1 2 3 +</td>
<td>+ (</td>
<td>右括号,弹出运算符直至遇到左括号</td>
</tr>
<tr>
<td>*</td>
<td>1 2 3 +</td>
<td>+ ( *</td>
<td>s1栈顶元素为左括号,运算符直接入栈</td>
</tr>
<tr>
<td>4</td>
<td>1 2 3 + 4</td>
<td>+ ( *</td>
<td>数字</td>
</tr>
<tr>
<td>)</td>
<td>1 2 3 + 4 *</td>
<td>+</td>
<td>右括号,弹出运算符直至遇到左括号</td>
</tr>
<tr>
<td>-</td>
<td>1 2 3 + 4 * +</td>
<td>-</td>
<td>-与+优先级相同,因此弹出+,在压入-</td>
</tr>
<tr>
<td>5</td>
<td>1 2 3 + 5 * + 5</td>
<td>-</td>
<td>数字</td>
</tr>
<tr>
<td>到达最右端</td>
<td>1 2 3 + 5 * + 5 -</td>
<td>空</td>
<td>s1中剩余的运算符</td>
</tr>
</tbody></table>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><ol>
<li><p>上述思路实现代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolandNotation</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String infixExpression;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 获取输入的中缀表达式,并放入List中</span></span><br><span class="line">		List&lt;String&gt; infixExpressionList = convertInfixExpressionToList(infixExpression);</span><br><span class="line">		System.out.println(<span class="string">"中缀表达式对应的 List = "</span> + infixExpressionList);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 将中缀表达式转成后缀表达式</span></span><br><span class="line">		List&lt;String&gt; suffixExpressionList = parseSuffixExpreesionList(infixExpressionList);</span><br><span class="line">		System.out.println(<span class="string">"后缀表达式对应的 List = "</span> + suffixExpressionList);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> res = calculate(suffixExpressionList);</span><br><span class="line">		System.out.printf(<span class="string">"expression=%d"</span>, res);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将中缀表达式转成对应的List</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">convertInfixExpressionToList</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 定义一个List,存放中缀表达式</span></span><br><span class="line">		List&lt;String&gt; ls = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;	<span class="comment">// 这是一个指针,用于遍历中缀表达式字符串</span></span><br><span class="line">		String str;	<span class="comment">// 对多位数的拼接</span></span><br><span class="line">		<span class="keyword">char</span> c;	<span class="comment">// 每遍历到一个字符,就放入到c</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			<span class="comment">// 如果c是一个非数字,就加入到ls</span></span><br><span class="line">			<span class="keyword">if</span> ((c = s.charAt(i)) &lt; <span class="number">48</span> || (c = s.charAt(i)) &gt; <span class="number">57</span>) &#123;</span><br><span class="line">				ls.add(<span class="string">""</span> + c);</span><br><span class="line">				i++;	<span class="comment">// i需要后移</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;	<span class="comment">// 如果是一个数字,就需要考虑这个数字是否是多位数</span></span><br><span class="line">				str = <span class="string">""</span>;	<span class="comment">// 先将str置为""	'0'[48]-&gt;'9'[57]</span></span><br><span class="line">				<span class="keyword">while</span> (i &lt; s.length() &amp;&amp; (c = s.charAt(i)) &gt;= <span class="number">48</span> &amp;&amp; (c = s.charAt(i)) &lt;= <span class="number">57</span>) &#123;</span><br><span class="line">					str += c;	<span class="comment">// 拼接</span></span><br><span class="line">					i++;</span><br><span class="line">				&#125;</span><br><span class="line">				ls.add(str);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">while</span> (i &lt; s.length());</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> ls;	<span class="comment">// 返回</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将得到的中缀表达式对应的List转成后缀表达式对应的List</span></span><br><span class="line"><span class="comment">	 * 思路</span></span><br><span class="line"><span class="comment">	 * 1.初始化两个栈:运算符栈s1和储存中间结果的栈s2</span></span><br><span class="line"><span class="comment">	 * 2.从左至右扫描中缀表达式</span></span><br><span class="line"><span class="comment">	 * 3.遇到操作数(数字)时,将其压入s2</span></span><br><span class="line"><span class="comment">	 * 4.遇到运算符时,比较其与s1栈顶运算符的优先级</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 4.1 如果s1为空,或栈顶运算符为左括号”(“,则直接将此运算符入栈</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 4.2 否则,若优先级比栈顶运算符的高,将运算符压入s1</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 4.3 否则,将s1栈顶的运算符弹出并压入到s2中,再次转到步骤4与s1中新的栈顶运算符相比较</span></span><br><span class="line"><span class="comment">	 * 5.遇到括号时</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 5.1 如果是左括号”(“,则直接压入s1</span></span><br><span class="line"><span class="comment">	 * -&gt; -&gt; 5.2 如果是右括号”)”,则依次弹出s1栈顶的运算符,并压入s2,直到遇到左括号为止,此时将这一对括号丢弃</span></span><br><span class="line"><span class="comment">	 * 6.重复步骤2至5,知道表达式的最右边</span></span><br><span class="line"><span class="comment">	 * 7.将s1中剩余的运算符依次弹出并压入s2</span></span><br><span class="line"><span class="comment">	 * 8.依次弹出s2中的元素并输出,结果的逆序即为中缀表达式对应的后缀表达式</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> ls</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">parseSuffixExpreesionList</span><span class="params">(List&lt;String&gt; ls)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 1.初始化两个栈:运算符栈s1和储存中间结果的栈s2</span></span><br><span class="line">		Stack&lt;String&gt; s1 = <span class="keyword">new</span> Stack&lt;String&gt;();		<span class="comment">// 符号栈</span></span><br><span class="line">		<span class="comment">// -&gt; 理论上需要定义两个栈</span></span><br><span class="line">		<span class="comment">// -&gt; 因为s2这个栈在整个转换过程中,没有pop操作,而且后面我们还需要逆序输出</span></span><br><span class="line">		<span class="comment">// -&gt; 所以,我们这里不用Stack&lt;String&gt; s2,而是直接使用 List&lt;String&gt; s2</span></span><br><span class="line">		<span class="comment">// -&gt; 即,不使用 Stack&lt;String&gt; s2 = new Stack&lt;String&gt;();</span></span><br><span class="line">		ArrayList&lt;String&gt; s2 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2.从左至右扫描中缀表达式</span></span><br><span class="line">		<span class="keyword">for</span> (String item : ls) &#123;</span><br><span class="line">			<span class="comment">// 3.遇到操作数(数字)时,将其压入s2</span></span><br><span class="line">			<span class="keyword">if</span> (item.matches(<span class="string">"\\d+"</span>)) &#123;</span><br><span class="line">				s2.add(item);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"("</span>)) &#123;</span><br><span class="line">				<span class="comment">// 5.1 如果是左括号”(“,则直接压入s1</span></span><br><span class="line">				s1.push(item);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">")"</span>)) &#123;</span><br><span class="line">				<span class="comment">//5.2 如果是右括号”)”,则依次弹出s1栈顶的运算符,并压入s2,直到遇到左括号为止,此时将这一对括号丢弃</span></span><br><span class="line">				<span class="keyword">while</span> (!s1.peek().equals(<span class="string">"("</span>)) &#123;</span><br><span class="line">					s2.add(s1.pop());</span><br><span class="line">				&#125;</span><br><span class="line">				s1.pop();	<span class="comment">// 弹出"(",消除小括号</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="comment">// 4.遇到运算符时,比较其与s1栈顶运算符的优先级</span></span><br><span class="line">				<span class="comment">// 4.3 当item的优先级小于等于s1栈顶运算符,将s1栈顶的运算符弹出并加入到s2中,在次转到4与s1中新的栈顶运算符相比较</span></span><br><span class="line">				<span class="keyword">while</span> (s1.size() != <span class="number">0</span> &amp;&amp; operatorPrecedence(s1.peek()) &gt;= operatorPrecedence(item)) &#123;</span><br><span class="line">					s2.add(s1.pop());</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">// 4.1 如果s1为空,或栈顶运算符为左括号”(“,则直接将此运算符入栈</span></span><br><span class="line">				<span class="comment">// 4.2 否则,若优先级比栈顶运算符的高,将运算符压入s1</span></span><br><span class="line">				s1.push(item);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 7.将s1中剩余的运算符依次弹出并压入s2</span></span><br><span class="line">		<span class="keyword">while</span> (s1.size() != <span class="number">0</span>) &#123;</span><br><span class="line">			s2.add(s1.pop());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 注意因为是存放到List,因此按顺序输出就是对应的后缀表达式对应的List</span></span><br><span class="line">		<span class="keyword">return</span> s2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将一个逆波兰表达式字符串进行分割后,依次将数据和运算符放入 ArrayList 中</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffixExpression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getListString</span><span class="params">(String suffixExpression)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 将 suffixExpression 分割</span></span><br><span class="line">		String[] split = suffixExpression.split(<span class="string">" "</span>);</span><br><span class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		<span class="keyword">for</span> (String element : split) &#123;</span><br><span class="line">			list.add(element);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 完成对逆波兰表达式的运算</span></span><br><span class="line"><span class="comment">	 * 思路</span></span><br><span class="line"><span class="comment">	 * 例如:(3+4)*5-6对应的后缀表达式就是3 4 + 5 * 6 -,针对后缀表达式求值步骤如下:</span></span><br><span class="line"><span class="comment">	 * 1. 从左至右扫描,将3和4压入堆栈</span></span><br><span class="line"><span class="comment">	 * 2. 遇到+运算符,因此弹出4和3(4为栈顶元素,3为次栈顶元素),计算出3+4的值,得7,再将7入栈</span></span><br><span class="line"><span class="comment">	 * 3. 将5入栈</span></span><br><span class="line"><span class="comment">	 * 4. 接下来是*运算符,因此弹出5和7,计算出7*5=35,将35入栈</span></span><br><span class="line"><span class="comment">	 * 5. 将6入栈</span></span><br><span class="line"><span class="comment">	 * 6. 最后是-运算符,计算出35-6的值,即29,由此得出最终结果</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> suffixlist</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(List&lt;String&gt; suffixList)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 创建一个栈(这里只需要一个栈)</span></span><br><span class="line">		Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 遍历 suffixList</span></span><br><span class="line">		<span class="comment">// 即 -&gt; 1.从左至右扫描</span></span><br><span class="line">		<span class="keyword">for</span> (String item : suffixList) &#123;</span><br><span class="line">			<span class="comment">// 这里使用正则表达式来取出数</span></span><br><span class="line">			<span class="comment">// 即 -&gt; 1. 将 3 4 压入栈</span></span><br><span class="line">			<span class="keyword">if</span> (item.matches(<span class="string">"\\d+"</span>)) &#123;	<span class="comment">// 匹配的是多位数</span></span><br><span class="line">				<span class="comment">// 入栈</span></span><br><span class="line">				stack.push(item);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;	<span class="comment">// 2.遇到+运算符...</span></span><br><span class="line">				<span class="keyword">int</span> stackTopElement = Integer.parseInt(stack.pop());	<span class="comment">// 栈顶元素</span></span><br><span class="line">				<span class="keyword">int</span> stackNextTopElement = Integer.parseInt(stack.pop());	<span class="comment">// 次栈顶元素</span></span><br><span class="line"></span><br><span class="line">				<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (item.equals(<span class="string">"+"</span>)) &#123;</span><br><span class="line">					res = stackTopElement + stackNextTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"-"</span>)) &#123;</span><br><span class="line">					res = stackNextTopElement - stackTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"*"</span>)) &#123;</span><br><span class="line">					res = stackTopElement * stackNextTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"/"</span>)) &#123;</span><br><span class="line">					res = stackNextTopElement / stackTopElement;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// 2.计算出3+4的值,得7,在将7入栈</span></span><br><span class="line">				stack.push(<span class="string">""</span> + res);	<span class="comment">// 这里需要将数字转换成字符串</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 最后留在stack中的数据是运算结果</span></span><br><span class="line">		<span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回运算符号的优先级</span></span><br><span class="line"><span class="comment">	 * -&gt; 优先级用数字表示</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> operation</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">operatorPrecedence</span><span class="params">(String operation)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">switch</span> (operation) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"+"</span>:</span><br><span class="line">			result = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"-"</span>:</span><br><span class="line">			result = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"*"</span>:</span><br><span class="line">			result = <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"/"</span>:</span><br><span class="line">			result = <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			System.out.println(<span class="string">"不存在该运算符"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zjinc36.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolandNotationTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCalResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String infixExpression = <span class="string">"1+((2+3)*4)-5"</span>;</span><br><span class="line">		PolandNotation polandNotation = <span class="keyword">new</span> PolandNotation();</span><br><span class="line">		polandNotation.setInfixExpression(infixExpression);</span><br><span class="line">		polandNotation.calResult();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</div><div class="tags"><a href="/tags/数据结构与算法-Java实现/">数据结构与算法(Java实现)</a></div><div class="post-share"></div><div class="post-nav"><a href="/2020/04/09/Ubuntu中安装kchmviewer用以打开chm文件/" class="pre">Ubuntu中安装kchmviewer用以打开chm文件</a><a href="/2020/04/03/Java中实现栈/" class="next">Java中实现栈</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NDg2NC8yMTM4NQ=="></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前缀表达式-波兰表达式"><span class="toc-text">前缀表达式(波兰表达式)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是前缀表达式"><span class="toc-text">什么是前缀表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前缀表达式的计算机求值"><span class="toc-text">前缀表达式的计算机求值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#思路"><span class="toc-text">思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#举例"><span class="toc-text">举例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#中缀表达式"><span class="toc-text">中缀表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是中缀表达式"><span class="toc-text">什么是中缀表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用栈-中缀表达式-来实现综合计算器"><span class="toc-text">使用栈(中缀表达式)来实现综合计算器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#思路分析"><span class="toc-text">思路分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码"><span class="toc-text">代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用数组模拟栈"><span class="toc-text">用数组模拟栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算器类"><span class="toc-text">计算器类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试结果"><span class="toc-text">测试结果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#后缀表达式"><span class="toc-text">后缀表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是后缀表达式"><span class="toc-text">什么是后缀表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#后缀表达式的计算机求值"><span class="toc-text">后缀表达式的计算机求值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#思路-1"><span class="toc-text">思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#举例-1"><span class="toc-text">举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现逆波兰计算器"><span class="toc-text">实现逆波兰计算器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#目标"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码-1"><span class="toc-text">代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#中缀表达式转后缀表达式"><span class="toc-text">中缀表达式转后缀表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#中缀表达式转后缀表达式的思路"><span class="toc-text">中缀表达式转后缀表达式的思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#举例说明"><span class="toc-text">举例说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码实现"><span class="toc-text">代码实现</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/26/解决Github-Page无法访问的其中一种情况/">解决Github-Page无法访问的其中一种情况</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/26/Ubuntu中修改DNS的方法/">Ubuntu中修改DNS的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/26/nslookup命令-查DNS信息用/">Nslookup命令-查DNS信息用</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/02/Ubuntu20-04中安装flameshot截屏工具/">Ubuntu20.04中安装flameshot截屏工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/31/Ubuntu刷新DNS/">Ubuntu刷新DNS</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/28/循环冗余校验（CRC）算法/">循环冗余校验（CRC）算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/26/ubuntu中Rime输入法的安装和配置/">ubuntu中Rime输入法的安装和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/26/Ubuntu18.04中ibus-sunpinyin的安装与设置/">ubuntu18.04中ibus-Sunpinyin的安装与设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/25/Ubuntu设置开机自动加-挂载硬盘/">Ubuntu设置开机自动加/挂载硬盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/18/Ubuntu18-04如何固定图标到任务栏/">Ubuntu18.04如何固定图标到任务栏</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BigData/">BigData</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Eclipse/">Eclipse</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Excel/">Excel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">96</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tampermonkey/">Tampermonkey</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a><span class="category-list-count">49</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/人工智能/">人工智能</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构与算法/">数据结构与算法</a><span class="category-list-count">40</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/正则表达式/">正则表达式</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/视频笔记/">视频笔记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机操作系统/">计算机操作系统</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机组成原理/">计算机组成原理</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/JSP-EL-JSTL/" style="font-size: 15px;">JSP/EL/JSTL</a> <a href="/tags/Eclipse/" style="font-size: 15px;">Eclipse</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Linux命令/" style="font-size: 15px;">Linux命令</a> <a href="/tags/Ubuntu装机日志/" style="font-size: 15px;">Ubuntu装机日志</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/Lombok/" style="font-size: 15px;">Lombok</a> <a href="/tags/Java细节/" style="font-size: 15px;">Java细节</a> <a href="/tags/Thymeleaf/" style="font-size: 15px;">Thymeleaf</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/Linux配置/" style="font-size: 15px;">Linux配置</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/Jackson/" style="font-size: 15px;">Jackson</a> <a href="/tags/BigData/" style="font-size: 15px;">BigData</a> <a href="/tags/Tomcat/" style="font-size: 15px;">Tomcat</a> <a href="/tags/Http/" style="font-size: 15px;">Http</a> <a href="/tags/Servlet/" style="font-size: 15px;">Servlet</a> <a href="/tags/Eclipse插件/" style="font-size: 15px;">Eclipse插件</a> <a href="/tags/Struts2/" style="font-size: 15px;">Struts2</a> <a href="/tags/Hibernate/" style="font-size: 15px;">Hibernate</a> <a href="/tags/OGNL/" style="font-size: 15px;">OGNL</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/MyBatis/" style="font-size: 15px;">MyBatis</a> <a href="/tags/人工智能/" style="font-size: 15px;">人工智能</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Jquery/" style="font-size: 15px;">Jquery</a> <a href="/tags/SpringSecurity/" style="font-size: 15px;">SpringSecurity</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/Excel/" style="font-size: 15px;">Excel</a> <a href="/tags/计算机组成原理/" style="font-size: 15px;">计算机组成原理</a> <a href="/tags/视频笔记/" style="font-size: 15px;">视频笔记</a> <a href="/tags/Ubuntu配置/" style="font-size: 15px;">Ubuntu配置</a> <a href="/tags/数据结构与算法-Java实现/" style="font-size: 15px;">数据结构与算法(Java实现)</a> <a href="/tags/Tampermonkey/" style="font-size: 15px;">Tampermonkey</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">85</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">85</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">35</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://lotabout.me/" title="三点水" target="_blank">三点水</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p><span> Copyright &copy;<a href="/." rel="nofollow">zjc.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body></html>