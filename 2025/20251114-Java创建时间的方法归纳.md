# Java创建时间的方法归纳

## Java 8+

推荐`java.time` 包（新时间 API）

`java.time` 是 Java 8 引入的新 API，包含`LocalDate`（日期）、`LocalTime`（时间）、`LocalDateTime`（日期 + 时间）、`Instant`（时间戳）等类，线程安全且易用。

### 创建当前时间

```java
import java.time.*;

// 当前日期（年-月-日）
LocalDate currentDate = LocalDate.now(); 

// 当前时间（时:分:秒.纳秒）
LocalTime currentTime = LocalTime.now(); 

// 当前日期+时间（年-月-日 时:分:秒.纳秒）
LocalDateTime currentDateTime = LocalDateTime.now(); 

// 当前时间戳（UTC时区，从1970-01-01 00:00:00开始的秒数+纳秒）
Instant currentInstant = Instant.now(); 
```


### 指定日期时间（手动创建）

```java
// 指定日期（年, 月, 日）
LocalDate date = LocalDate.of(2023, 10, 1); // 2023-10-01
LocalDate date2 = LocalDate.of(2023, Month.OCTOBER, 1); // 用Month枚举

// 指定时间（时, 分, 秒）
LocalTime time = LocalTime.of(14, 30, 45); // 14:30:45
LocalTime time2 = LocalTime.of(14, 30, 45, 123456789); // 带纳秒

// 指定日期+时间
LocalDateTime dateTime = LocalDateTime.of(2023, 10, 1, 14, 30);
LocalDateTime dateTime2 = LocalDateTime.of(date, time); // 合并LocalDate和LocalTime

// 指定时间戳（从1970-01-01 00:00:00开始的秒数）
Instant instant = Instant.ofEpochSecond(1696101045); // 秒级
Instant instant2 = Instant.ofEpochMilli(1696101045123L); // 毫秒级
```

### 解析字符串为时间（parse方法）

```java
// 解析日期字符串（默认格式：yyyy-MM-dd）
LocalDate date = LocalDate.parse("2023-10-01");

// 解析时间字符串（默认格式：HH:mm:ss）
LocalTime time = LocalTime.parse("14:30:45");

// 解析日期+时间字符串（默认格式：yyyy-MM-ddTHH:mm:ss）
LocalDateTime dateTime = LocalDateTime.parse("2023-10-01T14:30:45");

// 自定义格式解析（需用DateTimeFormatter）
import java.time.format.DateTimeFormatter;
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy/MM/dd HH:mm:ss");
LocalDateTime dateTime2 = LocalDateTime.parse("2023/10/01 14:30:45", formatter);
```

## Java 8之前

`java.util` 包（旧时间API）

旧API如`Date`、`Calendar`等存在线程不安全、设计混乱等问题，**不推荐使用**，但需了解兼容方式。

### `java.util.Date`
```java
import java.util.Date;

// 当前时间（精确到毫秒）
Date currentDate = new Date(); 

// 根据毫秒时间戳创建（从1970-01-01 00:00:00开始的毫秒数）
Date date = new Date(1696101045123L); 
```

### `java.util.Calendar`
```java
import java.util.Calendar;

// 当前时间
Calendar calendar = Calendar.getInstance();

// 指定日期时间（年, 月-1, 日, 时, 分, 秒）（月份从0开始，10月需传9）
Calendar calendar2 = Calendar.getInstance();
calendar2.set(2023, Calendar.OCTOBER, 1, 14, 30, 45); // 月份用Calendar常量更清晰
```

### 解析字符串（需用`SimpleDateFormat`，线程不安全）
```java
import java.text.SimpleDateFormat;
import java.util.Date;

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = sdf.parse("2023-10-01 14:30:45"); // 可能抛出ParseException
```


## 第三方库：Joda-Time（过渡方案）

Joda-Time是Java 8之前常用的时间库，设计优于旧API，现在逐渐被`java.time`替代，若需兼容可使用：

```java
import org.joda.time.DateTime;
import org.joda.time.LocalDate;

// 当前时间
DateTime dateTime = new DateTime();
LocalDate localDate = new LocalDate();

// 指定时间
DateTime dateTime2 = new DateTime(2023, 10, 1, 14, 30, 45);
LocalDate localDate2 = new LocalDate(2023, 10, 1);

// 解析字符串
DateTime parsed = DateTime.parse("2023-10-01T14:30:45");
```


### 总结

- 推荐：Java 8及以上使用 `java.time` 包（`LocalDateTime`、`Instant` 等），线程安全、API清晰。
- 兼容旧代码：可用 `java.util.Date/Calendar`，但需注意线程安全问题（如`SimpleDateFormat`）。
- 避免：新项目不建议使用Joda-Time，逐步迁移到`java.time`。

