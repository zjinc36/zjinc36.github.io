#	使用KubeSphere部署中间件

----

#   部署Mysql

##  创建pvc

![](../images/2021/12/20211220095003.png)

![](../images/2021/12/20211220095051.png)

+   有状态多使用单节点读写
+   无状态多使用多节点读写

![](../images/2021/12/20211216165041.png)


##  创建配置文件

![](../images/2021/12/20211220095209.png)

![](../images/2021/12/20211220095233.png)

![](../images/2021/12/20211220095436.png)

##  创建mysql

![](../images/2021/12/20211220095543.png)

![](../images/2021/12/20211220095605.png)

+   配置镜像

![](../images/2021/12/20211220101453.png)

![](../images/2021/12/20211220095817.png)

![](../images/2021/12/20211220100139.png)

![](../images/2021/12/20211220100409.png)

![](../images/2021/12/20211220100525.png)

![](../images/2021/12/20211220100855.png)

![](../images/2021/12/20211220101050.png)

![](../images/2021/12/20211220094527.png)

##  配置service

+   targetPort:是continer暴露出来的端口
+   port:是service暴露出来的端口
+   NodePort:是node暴露出来的端

![](../images/2021/12/20211220101631.png)

![](../images/2021/12/20211220101642.png)

![](../images/2021/12/20211220102022.png)

![](../images/2021/12/20211220102229.png)

![](../images/2021/12/20211220102326.png)

设置完成后可以查看外网的ip


#   部署redis

主要说明有启动命令该怎么处理

##  创建redis

![](../images/2021/12/20211220104257.png)

#   部署es

1.  说明配置文件要挂载的目录不为空
2.  说明有多个文件要如何挂载

![](../images/2021/12/20211220151559.png)

![](../images/2021/12/20211220151817.png)

#   使用商店或helm

##  使用Helm

### 添加Helm仓库

![](../images/2021/12/20211220150818.png)

![](../images/2021/12/20211220150714.png)

![](../images/2021/12/20211220150901.png)

### 使用Helm构建应用

![](../images/2021/12/20211220150520.png)

![](../images/2021/12/20211220150549.png)

这里主要是helm语法

![](../images/2021/12/20211220150614.png)