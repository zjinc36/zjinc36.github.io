#   logback配置日志

---
#   Slf4j是什么？

+   slf4j => The Simple Logging Facade for Java 即java的简单日志门面
+   简单的讲就是slf4j是一系列的日志接口，slf4j是作为一个日志的抽象行为存在的，但是并没有提供真正的实现。
+   slf4j为各种日志框架提供了一个统一的界面，使用户可以用统一的接口记录日志，动态地决定要使用的实现框架，比如`Logback，Log4j，common-logging等框架都实现了这些接口`。

#   Logback和Log4j的关系

Log4j 作为Apache的一个开放源代码的项目，通过使用Log4j，我们可以控制日志信息输送的目的地是控制台、文件等我们期望它输出到的地方；我们也可以控制每一条日志的输出格式；通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。

我们可以通过一个配置文件来灵活地进行上面的配置，而不需要修改应用的代码。Log4j作为当时作为最先比较流行的日志框架，给我们在应用开发和维护带来了很大的便捷。

但是，如今还是慢慢的走下“神坛”呢，逐渐被Logback替代，原来`Logback是Log4j升级版`，Logback是由log4j创始人设计的又一个开源日志组件

#   Logback

##  Logback主要有下面的特性：

+   更快的执行速度：基于我们先前在Log4j上的工作，Logback 重写了内部的实现，在某些特定的场景上面，甚至可以比之前的速度快上10倍。在保证Logback的组件更加快速的同时，同时所需的内存更加少；
+   充分的测试：Logback 历经了几年，数不清小时数的测试。尽管Log4j也是测试过的，但是Logback的测试更加充分，跟Log4j不在同一个级别。我们认为，这正是人们选择Logback而不是Log4j的最重要的原因。谁不希望即使在恶劣的条件下，你的日志框架依然稳定而可靠呢？

##  由三个模块组成

+   logback-core
+   logback-classic
+   logback-access

logback-core是其它模块的基础设施，其它模块基于它构建，显然，logback-core提供了一些关键的通用机制。logback-classic的地位和作用等同于 Log4J，它也被认为是 Log4J的一个改进版，并且它实现了简单日志门面 SLF4J；而 logback-access主要作为一个与 Servlet容器交互的模块，比如说tomcat或者 jetty，提供一些与 HTTP访问相关的功能。

#   SpringBoot如何配置日志

路人皆知，Springboot默认使用的日志框架是Logback。顺势而为，在项目中，我们使用Logback，其实只需增加一个配置文件（自定义你的配置）即可。

##  配置文件详解

在springboot中默认叫做`logback-spring.xml`，我们只要新建一个同名文件`放在resources下面`， 配置即可生效。

配置文件精简结构如下所示

```xml
<configuration scan="true" scanPeriod="60 seconds" debug="false">  
         <!-- 属性文件:在properties/yml文件中找到对应的配置项 -->
    <springProperty scope="context" name="logging.path" source="logging.path"/>
    <contextName>xxxxxx</contextName> 

    <appender>
        //xxxx
    </appender>   

    <logger>
        //xxxx
    </logger>

    <root>             
       //xxxx
    </root>  
</configuration>
```

这个文件在springboot中默认叫做logback-spring.xml，我们只要新建一个同名文件放在resources下面， 配置即可生效。

+   contextName
    -   每个logger都关联到logger上下文，默认上下文名称为“default”。但可以使用contextName标签设置成其他名字，用于区分不同应用程序的记录
+   property
    -   用来定义变量值的标签，property标签有两个属性，name和value；其中name的值是变量的名称，value的值时变量定义的值。通过property定义的值会被插入到logger上下文中。定义变量后，可以使“${name}”来使用变量。如上面的xml所示。
+   logger
    -   用来设置某一个包或者具体的某一个类的日志打印级别以及指定appender。
+   root
    -   根logger，也是一种logger，且只有一个level属性
+   appender
    -   负责写日志的组件
    -   appender的种类
        -   ConsoleAppender：把日志添加到控制台
        -   FileAppender：把日志添加到文件
        -   RollingFileAppender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件。它是FileAppender的子类
+   filter
    -   filter其实是appender里面的子元素。它作为过滤器存在，执行一个过滤器会有返回DENY，NEUTRAL，ACCEPT三个枚举值中的一个。
        -   DENY：日志将立即被抛弃不再经过其他过滤器
        -   NEUTRAL：有序列表里的下个过滤器过接着处理日志
        -   ACCEPT：日志会被立即处理，不再经过剩余过滤器

#   参考
+   [SpringBoot+logback优雅的配置日志！](https://blog.csdn.net/Mrs_chens/article/details/102455216)


